{"repository_name":"github.com/paradise-celestial/celestial","body":"# `celestial`\n\nA Paradise server written in Crystal\n\nStatus:\n\n-   `master`: [![Build Status](https://travis-ci.com/paradise-celestial/celestial.svg?branch=master)](https://travis-ci.com/paradise-celestial/celestial)\n-   `develop`: [![Build Status](https://travis-ci.com/paradise-celestial/celestial.svg?branch=develop)](https://travis-ci.com/paradise-celestial/celestial)\n\n## Installation\n\n### From Executable\n\n1.  Download the latest stable release from [the releases page](https://github.com/paradise-celestial/celestial/releases).\n2.  Place it in a folder where it won't get lost\n\n### From Source\n\n1.  Install [Crystal](https://crystal-lang.org/reference/installation/)\n2.  `git clone https://github.com/paradise-celestial/celestial.git --depth 1`\n    -   The `--depth 1` only downloads the latest source; this flag is optional\n3.  In the `celestial` folder, run `shards install && shards build --release`\n4.  The generated executable will be at `bin/celestial` in the `celestial` folder\n\n## Usage\n\nTo start the server, run the `celestial` executable; the bind address will be logged. Configuration options are coming soon.\n\n## Development\n\n2.  Install using the [contributing](#contributing) instructions\n3.  Make changes to the code\n4.  Use `crystal spec` and `bin/ameba` to test and lint\n5.  Continue with the contributing instructions\n\n## Contributing\n\n1.  Fork it (<https://github.com/paradise-celestial/celestial/fork>)\n2.  Create your feature branch (`git checkout -b my-new-feature`)\n3.  Commit your changes (`git commit -am 'Add some feature'`)\n    - This repository uses Commitizen\n    <!-- TODO: Commitizen instructions -->\n4.  Push to the branch (`git push origin my-new-feature`)\n5.  Create a new Pull Request\n\n## Contributors\n\n-   [microlith57](https://github.com/microlith57) - creator and maintainer\n-   [neauoire](https://github.com/neauoire) - creator of original Paradise implementation; inspiration for project\n","program":{"html_id":"github.com/paradise-celestial/celestial/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"github.com/paradise-celestial/celestial","program":true,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[{"id":"vessel_method(verb)-macro","html_id":"vessel_method(verb)-macro","name":"vessel_method","doc":"Creates a REST verb for a vessel\n\nFor example:\n\n    vessel_method get\n    # ==>\n    get \"/vessels/:id\" do |env|\n      id = env.params.url[\"id\"].to_i32\n      world.http_get(id, env)\n    end","summary":"<p>Creates a REST verb for a vessel</p>","abstract":false,"args":[{"name":"verb","doc":null,"default_value":"","external_name":"verb","restriction":""}],"args_string":"(verb)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/macros.cr#L11","def":{"name":"vessel_method","args":[{"name":"verb","doc":null,"default_value":"","external_name":"verb","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"  \n{{ verb.id }}\n \"/vessels/:id\" do |env|\n    id = \nenv.params.url[\"id\"].to_i32\n    @@world.http_\n{{ verb.id }}\n(id, \nenv)\n  \nend\n\n"}},{"id":"vessel_methods(*args)-macro","html_id":"vessel_methods(*args)-macro","name":"vessel_methods","doc":"Runs `#vessel_method` on all verbs given.","summary":"<p>Runs <code><a href=\"toplevel.html#vessel_method%28verb%29-macro\">#vessel_method</a></code> on all verbs given.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/macros.cr#L34","def":{"name":"vessel_methods","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":null,"splat_index":0,"block_arg":null,"visibility":"Public","body":"  \n{% for verb, i in args %}\n    vessel_method {{ verb }}\n  {% end %}\n\n\n"}},{"id":"vessels_method(verb)-macro","html_id":"vessels_method(verb)-macro","name":"vessels_method","doc":"Creates a REST verb for a vessel, not including ID\n\nFor example:\n\n    vessels_method post\n    # ==>\n    post \"/vessels\" do |env|\n      world.http_post(env)\n    end","summary":"<p>Creates a REST verb for a vessel, not including ID</p>","abstract":false,"args":[{"name":"verb","doc":null,"default_value":"","external_name":"verb","restriction":""}],"args_string":"(verb)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/macros.cr#L27","def":{"name":"vessels_method","args":[{"name":"verb","doc":null,"default_value":"","external_name":"verb","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"  \n{{ verb.id }}\n \"/vessels\" do |env|\n    @@world.http_\n{{ verb.id }}\n(\nenv)\n  \nend\n\n"}},{"id":"vessels_methods(*args)-macro","html_id":"vessels_methods(*args)-macro","name":"vessels_methods","doc":"Runs `#vessels_method` on all verbs given.","summary":"<p>Runs <code><a href=\"toplevel.html#vessels_method%28verb%29-macro\">#vessels_method</a></code> on all verbs given.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/macros.cr#L41","def":{"name":"vessels_methods","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":null,"splat_index":0,"block_arg":null,"visibility":"Public","body":"  \n{% for verb, i in args %}\n    vessels_method {{ verb }}\n  {% end %}\n\n\n"}}],"types":[{"html_id":"github.com/paradise-celestial/celestial/Celestial","path":"Celestial.html","kind":"module","full_name":"Celestial","name":"Celestial","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"parade/vessel.cr","line_number":3,"url":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/vessel.cr"},{"filename":"parade/world.cr","line_number":3,"url":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/world.cr"},{"filename":"version.cr","line_number":1,"url":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/version.cr"},{"filename":"celestial.cr","line_number":6,"url":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/celestial.cr"}],"repository_name":"github.com/paradise-celestial/celestial","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"\"1.0.0-beta.4\"","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"world-class-method","html_id":"world-class-method","name":"world","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/celestial.cr#L7","def":{"name":"world","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@world"}},{"id":"world=(world)-class-method","html_id":"world=(world)-class-method","name":"world=","doc":null,"summary":null,"abstract":false,"args":[{"name":"world","doc":null,"default_value":"","external_name":"world","restriction":""}],"args_string":"(world)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/celestial.cr#L7","def":{"name":"world=","args":[{"name":"world","doc":null,"default_value":"","external_name":"world","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@world = world"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/paradise-celestial/celestial/Celestial/Vessel","path":"Celestial/Vessel.html","kind":"class","full_name":"Celestial::Vessel","name":"Vessel","abstract":false,"superclass":{"html_id":"github.com/paradise-celestial/celestial/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/paradise-celestial/celestial/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/paradise-celestial/celestial/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"parade/vessel.cr","line_number":6,"url":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/vessel.cr"}],"repository_name":"github.com/paradise-celestial/celestial","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/paradise-celestial/celestial/Celestial","kind":"module","full_name":"Celestial","name":"Celestial"},"doc":"A `Vessel` is the base unit of the Paradise world. Vessels have names,\noptional attributes, parents, owners, and triggers.","summary":"<p>A <code><a href=\"../Celestial/Vessel.html\">Vessel</a></code> is the base unit of the Paradise world.</p>","class_methods":[],"constructors":[{"id":"new(name,parent,attr=&quot;&quot;,note=&quot;&quot;,owner=-1,triggers={}ofString=>String)-class-method","html_id":"new(name,parent,attr=&amp;quot;&amp;quot;,note=&amp;quot;&amp;quot;,owner=-1,triggers={}ofString=&gt;String)-class-method","name":"new","doc":"Create a new vessel.\n\nNOTE: `parent` and `owner` can be any object with `#to_i32` - they will be\nconverted to `Int32` when passed.","summary":"<p>Create a new vessel.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"parent","doc":null,"default_value":"","external_name":"parent","restriction":""},{"name":"attr","doc":null,"default_value":"\"\"","external_name":"attr","restriction":""},{"name":"note","doc":null,"default_value":"\"\"","external_name":"note","restriction":""},{"name":"owner","doc":null,"default_value":"-1","external_name":"owner","restriction":""},{"name":"triggers","doc":null,"default_value":"{} of String => String","external_name":"triggers","restriction":""}],"args_string":"(name, parent, attr = <span class=\"s\">&quot;&quot;</span>, note = <span class=\"s\">&quot;&quot;</span>, owner = <span class=\"n\">-1</span>, triggers = {} <span class=\"k\">of</span> <span class=\"t\">String</span> => <span class=\"t\">String</span>)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/vessel.cr#L11","def":{"name":"new","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"parent","doc":null,"default_value":"","external_name":"parent","restriction":""},{"name":"attr","doc":null,"default_value":"\"\"","external_name":"attr","restriction":""},{"name":"note","doc":null,"default_value":"\"\"","external_name":"note","restriction":""},{"name":"owner","doc":null,"default_value":"-1","external_name":"owner","restriction":""},{"name":"triggers","doc":null,"default_value":"{} of String => String","external_name":"triggers","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(name, parent, attr, note, owner, triggers)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(__temp_52:JSON::PullParser)-class-method","html_id":"new(__temp_52:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"__temp_52","doc":null,"default_value":"","external_name":"__temp_52","restriction":"::JSON::PullParser"}],"args_string":"(__temp_52 : JSON::PullParser)","source_link":null,"def":{"name":"new","args":[{"name":"__temp_52","doc":null,"default_value":"","external_name":"__temp_52","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(__temp_52)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"attr:String-instance-method","html_id":"attr:String-instance-method","name":"attr","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":null,"def":{"name":"attr","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@attr"}},{"id":"attr=(_attr:String)-instance-method","html_id":"attr=(_attr:String)-instance-method","name":"attr=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_attr","doc":null,"default_value":"","external_name":"_attr","restriction":"String"}],"args_string":"(_attr : String)","source_link":null,"def":{"name":"attr=","args":[{"name":"_attr","doc":null,"default_value":"","external_name":"_attr","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@attr = _attr"}},{"id":"name:String-instance-method","html_id":"name:String-instance-method","name":"name","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":null,"def":{"name":"name","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@name"}},{"id":"name=(_name:String)-instance-method","html_id":"name=(_name:String)-instance-method","name":"name=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_name","doc":null,"default_value":"","external_name":"_name","restriction":"String"}],"args_string":"(_name : String)","source_link":null,"def":{"name":"name=","args":[{"name":"_name","doc":null,"default_value":"","external_name":"_name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@name = _name"}},{"id":"note:String-instance-method","html_id":"note:String-instance-method","name":"note","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":null,"def":{"name":"note","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@note"}},{"id":"note=(_note:String)-instance-method","html_id":"note=(_note:String)-instance-method","name":"note=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_note","doc":null,"default_value":"","external_name":"_note","restriction":"String"}],"args_string":"(_note : String)","source_link":null,"def":{"name":"note=","args":[{"name":"_note","doc":null,"default_value":"","external_name":"_note","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@note = _note"}},{"id":"owner:Int32-instance-method","html_id":"owner:Int32-instance-method","name":"owner","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int32","source_link":null,"def":{"name":"owner","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int32","visibility":"Public","body":"@owner"}},{"id":"owner=(owner:Int64)-instance-method","html_id":"owner=(owner:Int64)-instance-method","name":"owner=","doc":null,"summary":null,"abstract":false,"args":[{"name":"owner","doc":null,"default_value":"","external_name":"owner","restriction":"Int64"}],"args_string":"(owner : Int64)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/vessel.cr#L20","def":{"name":"owner=","args":[{"name":"owner","doc":null,"default_value":"","external_name":"owner","restriction":"Int64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@owner = owner.to_i32"}},{"id":"owner=(_owner:Int32)-instance-method","html_id":"owner=(_owner:Int32)-instance-method","name":"owner=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_owner","doc":null,"default_value":"","external_name":"_owner","restriction":"Int32"}],"args_string":"(_owner : Int32)","source_link":null,"def":{"name":"owner=","args":[{"name":"_owner","doc":null,"default_value":"","external_name":"_owner","restriction":"Int32"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@owner = _owner"}},{"id":"parent:Int32-instance-method","html_id":"parent:Int32-instance-method","name":"parent","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int32","source_link":null,"def":{"name":"parent","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int32","visibility":"Public","body":"@parent"}},{"id":"parent=(parent:Int64)-instance-method","html_id":"parent=(parent:Int64)-instance-method","name":"parent=","doc":null,"summary":null,"abstract":false,"args":[{"name":"parent","doc":null,"default_value":"","external_name":"parent","restriction":"Int64"}],"args_string":"(parent : Int64)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/vessel.cr#L16","def":{"name":"parent=","args":[{"name":"parent","doc":null,"default_value":"","external_name":"parent","restriction":"Int64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@parent = parent.to_i32"}},{"id":"parent=(_parent:Int32)-instance-method","html_id":"parent=(_parent:Int32)-instance-method","name":"parent=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_parent","doc":null,"default_value":"","external_name":"_parent","restriction":"Int32"}],"args_string":"(_parent : Int32)","source_link":null,"def":{"name":"parent=","args":[{"name":"_parent","doc":null,"default_value":"","external_name":"_parent","restriction":"Int32"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@parent = _parent"}},{"id":"to_json(json:JSON::Builder)-instance-method","html_id":"to_json(json:JSON::Builder)-instance-method","name":"to_json","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"::JSON::Builder"}],"args_string":"(json : JSON::Builder)","source_link":null,"def":{"name":"to_json","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"::JSON::Builder"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"json.object do\n  _name = @name\n  if _name.nil?\n  else\n    json.field(\"name\") do\n      _name.to_json(json)\n    end\n  end\n  _attr = @attr\n  if _attr.nil?\n  else\n    json.field(\"attr\") do\n      _attr.to_json(json)\n    end\n  end\n  _note = @note\n  if _note.nil?\n  else\n    json.field(\"note\") do\n      _note.to_json(json)\n    end\n  end\n  _parent = @parent\n  if _parent.nil?\n  else\n    json.field(\"parent\") do\n      _parent.to_json(json)\n    end\n  end\n  _owner = @owner\n  if _owner.nil?\n  else\n    json.field(\"owner\") do\n      _owner.to_json(json)\n    end\n  end\n  _triggers = @triggers\n  if _triggers.nil?\n  else\n    json.field(\"triggers\") do\n      _triggers.to_json(json)\n    end\n  end\nend"}},{"id":"triggers:Hash(String,String)-instance-method","html_id":"triggers:Hash(String,String)-instance-method","name":"triggers","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(String, String)","source_link":null,"def":{"name":"triggers","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Hash(String, String)","visibility":"Public","body":"@triggers"}},{"id":"triggers=(_triggers:Hash(String,String))-instance-method","html_id":"triggers=(_triggers:Hash(String,String))-instance-method","name":"triggers=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_triggers","doc":null,"default_value":"","external_name":"_triggers","restriction":"Hash(String, String)"}],"args_string":"(_triggers : Hash(String, String))","source_link":null,"def":{"name":"triggers=","args":[{"name":"_triggers","doc":null,"default_value":"","external_name":"_triggers","restriction":"Hash(String, String)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@triggers = _triggers"}}],"macros":[],"types":[]},{"html_id":"github.com/paradise-celestial/celestial/Celestial/World","path":"Celestial/World.html","kind":"class","full_name":"Celestial::World","name":"World","abstract":false,"superclass":{"html_id":"github.com/paradise-celestial/celestial/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/paradise-celestial/celestial/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/paradise-celestial/celestial/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"parade/world.cr","line_number":6,"url":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/world.cr"}],"repository_name":"github.com/paradise-celestial/celestial","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/paradise-celestial/celestial/Celestial","kind":"module","full_name":"Celestial","name":"Celestial"},"doc":"Defines the world. A world contains many `Vessel` objects, and has a\n`timestamp` (in UTC) when it was last touched.","summary":"<p>Defines the world.</p>","class_methods":[],"constructors":[{"id":"new(__temp_67:JSON::PullParser)-class-method","html_id":"new(__temp_67:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"__temp_67","doc":null,"default_value":"","external_name":"__temp_67","restriction":"::JSON::PullParser"}],"args_string":"(__temp_67 : JSON::PullParser)","source_link":null,"def":{"name":"new","args":[{"name":"__temp_67","doc":null,"default_value":"","external_name":"__temp_67","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(__temp_67)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(vessels=[]ofVessel,timestamp=Time.utc_now)-class-method","html_id":"new(vessels=[]ofVessel,timestamp=Time.utc_now)-class-method","name":"new","doc":"Create a new world.","summary":"<p>Create a new world.</p>","abstract":false,"args":[{"name":"vessels","doc":null,"default_value":"[] of Vessel","external_name":"vessels","restriction":""},{"name":"timestamp","doc":null,"default_value":"Time.utc_now","external_name":"timestamp","restriction":""}],"args_string":"(vessels = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Vessel</span>, timestamp = <span class=\"t\">Time</span>.utc_now)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/world.cr#L10","def":{"name":"new","args":[{"name":"vessels","doc":null,"default_value":"[] of Vessel","external_name":"vessels","restriction":""},{"name":"timestamp","doc":null,"default_value":"Time.utc_now","external_name":"timestamp","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(vessels, timestamp)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"[](id)-instance-method","html_id":"[](id)-instance-method","name":"[]","doc":"Obtain the vessel with the given ID.","summary":"<p>Obtain the vessel with the given ID.</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""}],"args_string":"(id)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/world.cr#L19","def":{"name":"[]","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@vessels[id]"}},{"id":"[]?(id)-instance-method","html_id":"[]?(id)-instance-method","name":"[]?","doc":"Obtain the vessel with the given ID, or nil.","summary":"<p>Obtain the vessel with the given ID, or nil.</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""}],"args_string":"(id)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/world.cr#L14","def":{"name":"[]?","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@vessels[id]?"}},{"id":"delete(id)-instance-method","html_id":"delete(id)-instance-method","name":"delete","doc":"Remove a vessel from the world, shifting down all indexes after it and\nremoving references to it.\n\nFIXME: Make a vessel's children spill into its parent when the vessel is deleted","summary":"<p>Remove a vessel from the world, shifting down all indexes after it and removing references to it.</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""}],"args_string":"(id)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/world.cr#L27","def":{"name":"delete","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@vessels.delete(self[id])\n(0...@vessels.size).each do |v_id|\n  v = self[v_id]\n  if v.parent > id\n    v.parent = v.parent - 1\n  end\n  if v.parent == id\n    v.parent = v_id\n  end\n  if v.owner > id\n    v.owner = v.owner - 1\n  end\n  if v.owner == id\n    v.owner = v_id\n  end\nend\n"}},{"id":"http_delete(id,env)-instance-method","html_id":"http_delete(id,env)-instance-method","name":"http_delete","doc":null,"summary":null,"abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(id, env)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/world.cr#L100","def":{"name":"http_delete","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if @vessels[id]?\n  delete(id)\n  change_made({:delete => id})\n  env.response.content_type = \"application/json\"\n  {type: \"success\", timestamp: @timestamp}.to_json\nelse\n  env.response.status = HTTP::Status::NOT_FOUND\n  nil\nend"}},{"id":"http_get(id,env)-instance-method","html_id":"http_get(id,env)-instance-method","name":"http_get","doc":null,"summary":null,"abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(id, env)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/world.cr#L50","def":{"name":"http_get","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if @vessels[id]?\n  env.response.content_type = \"application/json\"\n  @vessels[id].to_json\nelse\n  env.response.status = HTTP::Status::NOT_FOUND\n  nil\nend"}},{"id":"http_patch(id,env)-instance-method","html_id":"http_patch(id,env)-instance-method","name":"http_patch","doc":null,"summary":null,"abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(id, env)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/world.cr#L80","def":{"name":"http_patch","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if @vessels[id]?\n  set_param(name, String)\n  set_param(parent, Int64)\n  set_param(attr, String)\n  set_param(note, String)\n  set_param(owner, Int64)\n  set_param(triggers, Hash(String, String))\nelse\n  env.response.status = HTTP::Status::NOT_FOUND\n  nil\nend\nchange_made({:patch => id})\nenv.response.content_type = \"application/json\"\n{type: \"success\", timestamp: @timestamp}.to_json\n"}},{"id":"http_post(env)-instance-method","html_id":"http_post(env)-instance-method","name":"http_post","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/world.cr#L60","def":{"name":"http_post","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@vessels << Vessel.new(name: param(name, String), parent: param(parent, Int64), attr: (param?(attr, String)) || \"\", note: (param?(note, String)) || \"\", owner: (param?(owner, Int64)) || -1, triggers: (param?(triggers, Hash(String, String))) || ({} of String => String))\nchange_made({:post => @vessels.size})\nenv.response.content_type = \"application/json\"\n{type: \"success\", id: @vessels.size, timestamp: @timestamp}.to_json\n"}},{"id":"index(env)-instance-method","html_id":"index(env)-instance-method","name":"index","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/world.cr#L45","def":{"name":"index","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"env.response.content_type = \"application/json\"\nto_json\n"}},{"id":"on_change(&on_change:Hash(Symbol,Int32)->)-instance-method","html_id":"on_change(&amp;on_change:Hash(Symbol,Int32)-&gt;)-instance-method","name":"on_change","doc":"Set the callback for any change to the world.\n\nExample:\n\n    world.on_change do |message|\n      puts message\n    end","summary":"<p>Set the callback for any change to the world.</p>","abstract":false,"args":[],"args_string":"(&on_change : Hash(Symbol, Int32) -> )","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/world.cr#L122","def":{"name":"on_change","args":[],"double_splat":null,"splat_index":null,"yields":1,"block_arg":{"name":"on_change","doc":null,"default_value":"","external_name":"on_change","restriction":"(Hash(Symbol, Int32) -> )"},"return_type":"","visibility":"Public","body":"@on_change = on_change"}},{"id":"timestamp:Time-instance-method","html_id":"timestamp:Time-instance-method","name":"timestamp","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Time","source_link":null,"def":{"name":"timestamp","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Time","visibility":"Public","body":"@timestamp"}},{"id":"timestamp=(_timestamp:Time)-instance-method","html_id":"timestamp=(_timestamp:Time)-instance-method","name":"timestamp=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_timestamp","doc":null,"default_value":"","external_name":"_timestamp","restriction":"Time"}],"args_string":"(_timestamp : Time)","source_link":null,"def":{"name":"timestamp=","args":[{"name":"_timestamp","doc":null,"default_value":"","external_name":"_timestamp","restriction":"Time"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@timestamp = _timestamp"}},{"id":"to_json(json:JSON::Builder)-instance-method","html_id":"to_json(json:JSON::Builder)-instance-method","name":"to_json","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"::JSON::Builder"}],"args_string":"(json : JSON::Builder)","source_link":null,"def":{"name":"to_json","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"::JSON::Builder"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"json.object do\n  _vessels = @vessels\n  if _vessels.nil?\n  else\n    json.field(\"vessels\") do\n      _vessels.to_json(json)\n    end\n  end\n  _timestamp = @timestamp\n  if _timestamp.nil?\n  else\n    json.field(\"timestamp\") do\n      _timestamp.to_json(json)\n    end\n  end\nend"}},{"id":"touch-instance-method","html_id":"touch-instance-method","name":"touch","doc":"Set the timestamp to the current UTC time.","summary":"<p>Set the timestamp to the current UTC time.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/paradise-celestial/celestial/blob/abfbe0e8d5bf01dcbc4032fc1675269dfdd720ca/src/parade/world.cr#L41","def":{"name":"touch","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@timestamp = Time.utc_now"}},{"id":"vessels:Array(Vessel)-instance-method","html_id":"vessels:Array(Vessel)-instance-method","name":"vessels","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(Vessel)","source_link":null,"def":{"name":"vessels","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(Vessel)","visibility":"Public","body":"@vessels"}},{"id":"vessels=(_vessels:Array(Vessel))-instance-method","html_id":"vessels=(_vessels:Array(Vessel))-instance-method","name":"vessels=","doc":null,"summary":null,"abstract":false,"args":[{"name":"_vessels","doc":null,"default_value":"","external_name":"_vessels","restriction":"Array(Vessel)"}],"args_string":"(_vessels : Array(Vessel))","source_link":null,"def":{"name":"vessels=","args":[{"name":"_vessels","doc":null,"default_value":"","external_name":"_vessels","restriction":"Array(Vessel)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@vessels = _vessels"}}],"macros":[],"types":[]}]}]}}